<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width; initial-scale=1.0">
  <title>MongoDb - my first impressions | Opeyemi's BS</title>
  <link href="http://fonts.googleapis.com/css?family=Libre+Baskerville" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="stylesheet" href="/assets/css/zenburn.css" />
  <link rel="alternate" type="application/atom+xml" title="Feed for blog posts" href="/feed.xml">
</head>
<body>
  <div class="wrapper">
    <nav>
      <a href="/">home</a> &middot; <a href="/posts.html">posts</a> &middot; <a href="/feed.xml">feed</a>
    </nav>
    <header>
        <h1>MongoDb - my first impressions</h1>
        <time>31 Jul 2010</time>
    </header>
    <article>
        <p><img src="/assets/image/2010/07/12975944-speed.jpg" /></p>
<p>I've been toying on new things of late by giving a shot at new frameworks, standards and general development tools. And <a href="http://mongodb.org">MongoDb</a> has been one of the new love.</p>
<p>There is this project I'm playing with that has something along the lines of a contact manager. Thing is the app involves way too many database writes. An example is importing a set of contacts (in VCard). Each contact imported performs multiple writes across 4 different tables. In short, importing a collection of 100 contacts (zipped) performs nothing less than 500 writes and could even be as much as 800 depending on the availability of different contact elements (VCard standard) like <em>addr, role, email, org</em>, etc. Profiling (locally on my PC), I got around 20 sec (including script execution time) for an import action of a collection of 144 vcard contacts using MySQL as my DB. This is quite worrysome. I switched the database engine to Mongo and killed the relationships between the 4 tables used for contacts insertion to one. Guess what? I got just around 2 seconds against MySQL's 20 secs. The write speed is just so great!</p>
<p>I've since been converting the whole project to use MongoDb. It's quite challenging though but its been fun. The very big challenge is having to do away with table relationships and joins. The plus however is that been non-relational, you are not constrained by the table's standard columns; meaning that each row in a table can have different columns (or fields). Say I have this in MySQL:</p>
<p><img src="/assets/image/2010/07/12976151-posterous.gif" /></p>
<p>It's interpretation in Mongo will simply go like</p>
<p><div class="highlight"><pre><code class="javascript"><span class="lineno"> 1</span> <span class="p">[</span>
<span class="lineno"> 2</span>     <span class="nx">_id</span><span class="o">:</span> <span class="s2">&quot;*some string of 24 hexidecimal chars*&quot;</span><span class="p">,</span>
<span class="lineno"> 3</span>     <span class="c1">// Sorry, no auto increment ids (there are workarounds though)</span>
<span class="lineno"> 4</span>     <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Opeyemi Obembe&quot;</span><span class="p">,</span>
<span class="lineno"> 5</span>     <span class="nx">email</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;ray@ngbot.com&quot;</span><span class="p">,</span> <span class="s2">&quot;ray@devedgelabs.com&quot;</span><span class="p">],</span>
<span class="lineno"> 6</span>     <span class="nx">tel</span> <span class="o">:</span> <span class="s2">&quot;08066887840&quot;</span>
<span class="lineno"> 7</span> <span class="p">]</span>
<span class="lineno"> 8</span> <span class="p">[</span>
<span class="lineno"> 9</span>     <span class="nx">_id</span><span class="o">:</span> <span class="s2">&quot;***&quot;</span><span class="p">,</span>
<span class="lineno">10</span>     <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;Ernest Ojeh&quot;</span><span class="p">,</span>
<span class="lineno">11</span>     <span class="nx">email</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;ernest@ngbot.com&quot;</span><span class="p">],</span> <span class="c1">// Just an email</span>
<span class="lineno">12</span>     <span class="nx">pro</span><span class="o">:</span> <span class="mi">1</span>
<span class="lineno">13</span> <span class="p">]</span>
</code></pre></div></p>
<p>Soon I hope I will be able to share some quite trouble necked queries and their workarounds</p>

        <p></p>
        <em><a href="http://twitter.com/kehers">Discuss on twitter.</a></em>
    </article>

    <footer>
      <a href="/">home</a> &middot; <a href="posts.html">posts</a> &middot; <a href="http://github.com/kehers/kehers.github.com">source</a> &middot; <a href="http://twitter.com/kehers">@kehers</a>
    </footer>
  </div>
</body>
</html>